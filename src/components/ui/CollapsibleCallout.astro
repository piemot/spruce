---
import ChevronRightIcon from "@lucide/astro/icons/chevron-right";
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"div"> {
  title: string;
}

const { title, ...props } = Astro.props;
---

<collapsible-element
  data-closed=""
  class="my-4 grid grid-cols-[auto_1fr] gap-2 rounded-xl border border-gray-500 bg-card p-3 ps-2 text-sm text-card-foreground shadow-md"
  {...props}
>
  <div class="click-target group flex gap-2">
    <slot name="icon">
      <ChevronRightIcon class="size-5 transition group-data-open:rotate-90" />
    </slot>
  </div>
  <div class="grid grid-cols-1">
    <span class="click-target !my-0 font-medium">{title}</span>
    <div class="collapse-target grid grid-rows-[0fr] transition-[grid-template-rows] data-open:grid-rows-[1fr]">
      <div class="overflow-hidden text-muted-foreground [&>*:first-child]:!mt-0 [&>*:last-child]:!mb-0">
        <slot name="default" />
      </div>
    </div>
  </div>
</collapsible-element>
